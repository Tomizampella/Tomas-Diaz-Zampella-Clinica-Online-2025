<div class="container d-flex justify-content-center align-items-center" style="height: 100%;">
    <div class="row-custom-width chat-box shadow-custom rounded overflow-hidden d-flex flex-column"
        style="max-width: 100%; height: 420px; min-width: 500px;">

        <!-- Header -->
         <div class="p-1 bg-azul text-white d-flex justify-content-between align-items-center">
                 <strong class="ms-2">Sección pacientes</strong>
     
        </div>
        <!-- Contenido -->
        <div class="flex-grow-1 overflow-hidden p-3 d-flex flex-column align-items-center justify-content-center"
            style="background-color: #f8f9fa;">

            <div class="solicitar-turno h-100 w-100 d-flex flex-column">



                <!-- 2. Profesionales -->
                <div class="mb-1 w-100 slide-in" *ngIf="pacientes.length > 0">
                    <p class="mb-1 text-muted small ">Pacientes:</p>
                    <div class="row flex-shrink-0 profesionales-row">
                        <div class="d-flex flex-wrap gap-2 justify-content-center">
                            <div *ngFor="let p of pacientes" class="d-flex flex-column align-items-center">
                                <button type="button" class="btn btn-light btn-circle" (click)="selectPaciente(p.id)">
                                    <img class="imagen-circle" src="{{p.foto_1}}" alt="{{p.nombre}}">
                                </button>
                                <div class="mt-1 small text-center"> <strong>{{ p.nombre}}</strong></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Listado Turnos -->
                <div *ngIf="selectedPaciente !== ''; else sinResultados" class="flex-grow-1 overflow-auto p-4 rounded" style="background-color: rgb(235, 235, 235);">
                    <div *ngFor="let item of turnosPorId[selectedPaciente]; trackBy: trackById">
                        <!-- Cards -->
                        <div class="flex-grow-1 overflow-hidden p-2 d-flex flex-column align-items-center  m-3 shadow-custom rounded"
                            [ngClass]="item.estado" style="height: 200px;background-color: rgb(190, 189, 189);">
                            <!-- Card-header -->
                            <div
                                class="p-1 bg-azul text-white d-flex justify-content-between align-items-center w-100 rounded">
                                <strong class="ms-2">{{formatearFecha(item.fecha)}}
                                    {{formatHorario(item.hora)}}</strong>
                                
                            </div>
                            <!-- Card-contenido -->
                            <div class="p-2 d-flex flex-column align-items-center justify-content-center h-100">
                                <p><strong>Especialidad:</strong> {{item.especialidad}}</p>
                                <p><strong>Paciente:</strong> {{item.paciente.nombre}}
                                    {{item.paciente.apellido}}</p>
                            </div>
                            <!-- Boton cancelar solo para estado:pendiente -->
                            <div class="d-flex flex-wrap gap-2 justify-content-center">
                                <button type="button" class="btn btn-info"
                                    (click)="verResena(item)">Ver reseña</button>
                            </div>
                        </div>
                    </div>


                </div>
                <ng-template #sinResultados>
                    <div *ngIf="selectedPaciente === ''" class="d-flex flex-column h-100 rounded align-items-center justify-content-center" style="background-color: rgb(235, 235, 235);">
                        <p *ngIf="selectedPaciente === '' && pacientes.length > 0" class="text-center align-middle text-muted">Seleccione un paciente para ver los turnos realizados.</p>
                        <p *ngIf="selectedPaciente === '' && pacientes.length === 0" class="text-center align-middle text-muted">Todavía no tenes ningún turno finalizado.</p>
                    </div>
                </ng-template>

            </div>
        </div>